<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>首页动画</title>
    <style>
        * {
            box-sizing: border-box;
            color: var(--blue);
        }

        :root {
            --blue: #00adef;
        }

        /*布局*/
        html, body {
            height: 100%;
        }

        body {
            width: 84rem;
            height: 36rem;
            /*padding: 1rem;*/
            background-color: #07151d;
        }

        .myContainer {
            position: relative;
            text-align: center;
        }

        .textPicBox {
            display: inline-block;
            width: 30%;
            margin-left: 5%;
            margin-right: 5%;
            vertical-align: top;

        }

        .textPicBox:nth-of-type(2) {
            width: 30rem;
        }

        .textPicBox img {
            width: 100%;
        }

        .textPicBox .picBox {
            position: relative;
            height: 15rem;
            background: url("${contextPath}/static/phm/images/system/algorithm.png") no-repeat;
            background-size: 100% 100%;
        }

        /*光效动画*/
        .line {
            position: relative;
            height: .375em;
            width: 1em;
            background: radial-gradient(ellipse farthest-side at 100% 50%, var(--blue), rgba(0, 0, 0, 0));
            /*animation-duration: 2s;*/
            animation-fill-mode: forwards;
            opacity: 0;
        }

        .lineTo.line {
            animation-name: lineTo;
        }

        .line:after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translate(50%, -50%);
            display: block;
            width: .75em;
            height: .75em;
            background: radial-gradient(closest-side, white, var(--blue) 40%, rgba(0, 0, 0, 0));
        }

        @keyframes lineTo {
            0% {
                width: 0;
                opacity: 0;
            }
            30% {
                opacity: 1;
            }
            to {
                width: 100%;
                opacity: 1;

            }
        }

        [class^=animationBox] {
            position: absolute;
        }

        .lineBox {
            margin-top: 1rem;
            margin-bottom: 1rem;
            transform-origin: left center;
        }

        /*右边的光束*/
        .animationBox-right {
            right: 0;
            top: 6rem;
            width: 12rem;
        }

        .animationBox-right .lineBox:nth-of-type(1),
        .animationBox-right .lineBox:nth-of-type(2) {
            transform: translateX(90%) rotate(170deg);
        }

        .animationBox-right .lineBox:nth-of-type(2) {
            margin-bottom: 5rem;
        }

        .animationBox-right .lineBox:nth-of-type(3),
        .animationBox-right .lineBox:nth-of-type(4) {
            transform: translateX(90%) rotate(190deg);
        }

        /*中间的光束*/
        .animationBox-center {
            left: 40%;
            top: 12rem;
            width: 12rem;
            height: 20rem;
            filter: hue-rotate(-90deg);
        }

        .animationBox-center .lineBox {
            transform: translateX(90%) rotate(195deg);
        }

        /*左边的光束*/
        .animationBox-left {
            left: 2rem;
            top: 9rem;
            width: 12rem;
        }

        .animationBox-left .lineBox:nth-of-type(1) {
            transform: translateX(90%) rotate(190deg);
        }

        .animationBox-left .lineBox:nth-of-type(2) {
            margin-top: 2rem;
            margin-bottom: 2rem;
            transform: translateX(90%) rotate(180deg);
        }

        .animationBox-left .lineBox:nth-of-type(3) {
            transform: translateX(90%) rotate(170deg);
        }

        /*智能算法*/
        .lineThin {
            position: absolute;
            right: 0;
            width: 0;
            height: .125rem;
            background: yellow;
            transition-property: all;
            transition-duration: 1s;
            transform-origin: 100% 0;

        }

        .lineThin:nth-of-type(1),
        .lineThin:nth-of-type(2),
        .lineThin:nth-of-type(3),
        .lineThin:nth-of-type(4) {
            right: 5.875rem;
            top: 4.125rem;
        }

        .lineThin.lineThinTo:nth-of-type(1),
        .lineThin.lineThinTo:nth-of-type(2),
        .lineThin.lineThinTo:nth-of-type(3),
        .lineThin.lineThinTo:nth-of-type(5) {
            width: 2.5rem;
        }

        .lineThin:nth-of-type(2),
        .lineThin:nth-of-type(5) {
            top: 7rem;
        }

        .lineThin:nth-of-type(3),
        .lineThin:nth-of-type(6) {
            top: 10.625rem;
        }

        .lineThin:nth-of-type(4),
        .lineThin:nth-of-type(5),
        .lineThin:nth-of-type(6) {
            right: 9.875rem;
        }
        .lineThin:nth-of-type(4){
            transform: rotate(-45deg);
        }
        .lineThin:nth-of-type(5){
            transform: rotate(-9deg);
        }

        .lineThin:nth-of-type(6) {
            transform: rotate(45deg);
        }
        .lineThin.lineThinTo:nth-of-type(4){
            width: 4.25rem;
        }
        .lineThin.lineThinTo:nth-of-type(5){
            width: 3rem;
        }
        .lineThin.lineThinTo:nth-of-type(6) {
            width: 4.25rem;
        }
        .lineThin:nth-of-type(7) {
            right: 14rem;
            top: 5rem;
            transform: rotate(-90deg);
        }
        .lineThin.lineThinTo:nth-of-type(7) {
            width: 1.375rem;
        }
        .lineThin:nth-of-type(8) {
            right: 15.125rem;
            top: 7.5rem;
        }
        .lineThin.lineThinTo:nth-of-type(8) {
            width: 2.875rem;
        }
        .lineThin:nth-of-type(9) {
            right: 20.375rem;
            top: 7.5rem;
        }
        .lineThin.lineThinTo:nth-of-type(9) {
            width: 3rem;
        }






        /*
                @keyframes lineThinTo {
                    0% {
                        width: 0;
                        opacity: 0;
                    }
                    30% {
                        opacity: 1;
                    }
                    to {
                        width: 100%;
                        opacity: 1;
                    }
                }
        */
    </style>
</head>
<body>
<div class="myContainer">
    <div class="textPicBox">
        <h3>整机诊断预测模型</h3>
        <img class="pic" src="${contextPath}/static/phm/images/strategy/mod_1.png" alt="整机诊断预测模型">
    </div>
    <div class="textPicBox">
        <h3>智能算法</h3>
        <div class="picBox">
            <div class="lineThin"></div>
            <div class="lineThin"></div>
            <div class="lineThin"></div>

            <div class="lineThin"></div>
            <div class="lineThin"></div>
            <div class="lineThin"></div>

            <div class="lineThin"></div>
            <div class="lineThin"></div>
            <div class="lineThin"></div>
        </div>
    </div>
    <div class="animationBox-right">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </div>
    <div class="animationBox-center">
        <div class="line"></div>
    </div>
    <div class="animationBox-left">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </div>
</div>
<script src="${contextPath}/static/phm/asserts/js/jquery-2.2.4.js" type="text/javascript" charset="utf-8"></script>
<script>
    // waiting代表动画前的等待时间
    const animationArr = {
        "waiting": 0,
        "animationBox-right": 2,
        "waiting2": 2,
        "animationBox-center": 2,
        "waiting3": 1,
        "animationBox-left": 2,
    };
    const nameArr = Object.keys(animationArr);

    $(function () {
        $(".line").wrap("<div class='lineBox'></div>");
        let animationNext;
        start();
        setTimeout(function () {
            clear();
            start();
        }, 10000);

        function clear() {//重置
            $(".line").css("animation-duration", 0);
        }

        function start() {//开始动画
            animationNext = animationGen();
            animationCtr(0);//开始
        }

        function animationCtr(i) {
            setTimeout(function () {
                let $lineBox = animationNext.next().value;
                if ($lineBox) {
                    $lineBox.find(".line").addClass("lineTo").css("animation-duration", animationArr[nameArr[i + 1]] + "s");
                }
            }, animationArr[nameArr[i]] * 1000);
        }

        function* animationGen() {
            for (let i = 0; i < nameArr.length; i++) {
                animationCtr(i);
                yield $("." + nameArr[i]);
            }
        }

    });

    /*智能算法动画*/
    setTimeout(function () {
        $(function () {
            $(".lineThin").addClass("lineThinTo")
        })
    },3000)



</script>
</body>
</html>