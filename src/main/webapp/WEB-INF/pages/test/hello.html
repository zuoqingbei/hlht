<!DOCTYPE html>
<html>
<head>
    <title>视频监控测试页</title>
    <script src="../static/test/swfobject.js"></script>
    <script src="../static/asserts/js/jquery-2.2.4.js"></script>
    <style>
        .picBox{
            height: 30em;
        }
        .picBox > div {
            height: 13em;
            width: 30%;
            border: 2px solid black;
            display: inline-block;
            cursor: pointer;
        }
        .picBox > div:hover{
            background-color: rgba(0, 204, 255, 0.21);
        }
        .videoBox {
            display: none;
            position: absolute;
            top:0;
            width: 90%;
            height: 30em;
        }
        h1{
            position: fixed;
            bottom: 2em;
        }
        .buttons {
            display: none;
            position: fixed;
            bottom: 1em;
        }

        #player {
            /*display: block;*/
        }
    </style>
</head>
<body>
<h2 class="text-right"><a href="./hello_bak.html">另一种测试</a> </h2>
<div class="picBox">
    <div class="pic">1</div>
    <div class="pic">2</div>
    <div class="pic">3</div>
    <div class="pic">4</div>
    <div class="pic">5</div>
    <div class="pic">6</div>
</div>
<div class="videoBox">
    <button class="close">返回</button>
    <div id="player"></div>
</div>
<h1>双击盒子显示视频</h1>

<br>
<div class="buttons">
    <button>本机内网</button>
    <button>本机外网</button>
    <button>胶州一期抽样安全</button>
    <button>胶州一期抽样性能</button>
    <button>体验馆2</button>
    <br>
    <button>RF-A</button>
    <button>RF-B</button>
    <button>RF-C</button>
    <button>RF-D</button>
    <button>IPdome</button>
    <button>RF-IN</button>
    <button>香港卫视</button>
    <button>cctv</button>
    <hr>
    <button id="mask">盖住</button>
</div>

<script>
    function loadSwf(url) {

//        $("#player").remove();
//        $("body").append('<div id="player">');
        var flashvars = {
            src: escape(url),
            // url to OSMF HLS Plugin
            plugin_m3u8: "../static/test/HLSProviderOSMF.swf",
            autoPlay: "true",
            autoSwitchQuality: "true",
        };
        var params = {
            // self-explained parameters
//        play: true,
            allowFullScreen: true,
            allowScriptAccess: "always",
            quality: "low",
            bgcolor: "#000000" //不识别rgba颜色，不然可以试试透明色
        };
        var attrs = {
            name: "player"
        };

        /*
        swfobject.embedSWF()的五个必须参数和四个可选参数：
        swfUrl（String，必须的）指定SWF的URL。
        id（String，必须的）指定将会被Flash内容替换的HTML元素（包含你的替换内容）的id。
        width（String，必须的）指定SWF的宽。
        height（String，必须的）指定SWF的高。
        version（String，必须的）指定你发布的SWF对应的Flash Player版本（格式为：major.minor.release）。
        expressInstallSwfurl（String，可选的）指定express install SWF的URL并激活Adobe express install [ http://www.adobe.com/cfusion/knowledgebase/index.cfm?id=6a253b75 ]。
        flashvars（String，可选的）用name:value对指定你的flashvars。
        params（String，可选的）用name:value对指定你的嵌套object元素的params。
        attributes（String，可选的）用name:value对指定object的属性。
         */
        /*
                2.2   embedSWF: function(
                    swfUrlStr, replaceElemIdStr, widthStr, heightStr, swfVersionStr, xiSwfUrlStr,
                     flashvarsObj, parObj, attObj, callbackFn)

                swfUrlStr：（String，必须的）flash地址url,
                replaceElemIdStr,：（String，必须的）替换元素的id
                widthStr：（String，必须的）flash宽度，类型为字符串
                heightStr：（String，必须的）flash高度
                swfVersionStr：（String，必须的）指定你发布的SWF对应的Flash Player版本（格式为：major.minor.release）
                xiSwfUrlStr：（String，可选的）指定express install SWF的URL并激活Adobe express install
                flashvarsObj：（Object，可选的）用name:value对指定你的flashvars
                parObj：（Object，可选的）用name:value对指定你的嵌套object元素的params
                attObj：（Object，可选的）用name:value对指定object的属性
                callbackFn：（Function，可选的）flash加载完成的回调函数，2.2才支持。
                callbackFn参数：{success:true/false,id:"object id",ref:DOM Element}
                success, Boolean to indicate whether the embedding of a SWF was success or not
                id, String indicating the ID used in swfobject.registerObject
                ref, HTML object element reference (returns undefined when success=false)
        */
        $("#player").hide().show();
        swfobject.embedSWF(
            // url to SMP player
            "../static/test/StrobeMediaPlayback.swf",
            // div id where player will be place
            "player",
            // width, height
            "800", "485",
            // minimum flash player version required
            "10.4",
            // other parameters
            null,
            flashvars,
            params,
            attrs,
            function () {
//                alert(1)
            }
        )
    }

</script>

<!--
<script type="text/javascript" src="//the5fireblog.b0.upaiyun.com/staticfile/swfobject.js"></script>
<i>仅供技术交流</i> <br/><br/>
<div>参考：<a href="https://www.the5fire.com/m3u8-web-player.html">动手现实m3u8浏览器播放器</a></div>
<br/>
<div id="moviePlayerWapper" style='background:#000;width:700px;height:380px;'></div>
<br/>
<div class="input-group input-group-lg">
    <input type="text" id="m3u8" class="form-control" placeholder="Username" value="https://www.the5fire.com/static/demos/diaosi.m3u8"/>
    <span class="input-group-addon">
        <a href="javascript:play();">播放</a>
    </span>
</div>

<script> var play = function () {
    var m3u8 = document.getElementById('m3u8').value;
    var flashvars = {
        // M3U8 url, or any other url which compatible with SMP player (flv, mp4, f4m)
        // escaped it for urls with ampersands src: escape(m3u8),
        // url to OSMF HLS Plugin
         plugin_m3u8: "/static/demos/swf/HLSProviderOSMF.swf",
    };
    var params = {
        // self-explained parameters
         allowFullScreen: true,
        allowScriptAccess: "always",
        bgcolor: "#000000"
    };
     var attrs = { name: 'player' },
     swfobject.embedSWF(
    // url to SMP player "/static/demos/swf/StrobeMediaPlayback.swf",
    // div id where player will be place "moviePlayerWapper",
    // width, height "700", "485",
    // minimum flash player version required "10.2",
    // other parameters null, flashvars, params, attrs );
    // var img = document.createElement("IMG");
//         window.img = img;
     )
    }-->
<script>
    var videoUrls = [
        "http://192.168.1.168:6713/mag/hls/936f41ee21914f1c9435bb507fd1e81d/1/live.m3u8",//本机内网
        "http://10.130.96.65:6713/mag/hls/936f41ee21914f1c9435bb507fd1e81d/1/live.m3u8",//本机外网
        "http://10.130.96.65:6713/mag/hls/db2920c76afa4cf2ae02dd0f414a4bd4/1/live.m3u8",//胶州一期抽样安全
        "http://10.130.96.65:6713/mag/hls/ab2a11779b444bbdb1ffc6b1178d90db/1/live.m3u8",//胶州一期抽样性能
        "http://10.130.96.65:6713/mag/hls/3e158a568dd84c2890d095a25517f78b/1/live.m3u8",//体验馆2

        "http://10.130.96.65:6713/mag/hls/8f60eef006f34032b3f92079553a5e39/1/live.m3u8",//RF-A
        "http://10.130.96.65:6713/mag/hls/b055403a5a464b69bebc4b670bfdff60/1/live.m3u8",//RF-B
        "http://10.130.96.65:6713/mag/hls/72441956200e45c5a9487ce9a8cee4bf/1/live.m3u8",//RF-C
        "http://10.130.96.65:6713/mag/hls/8d366d48f61e44df92fe1f79fb4b1e17/1/live.m3u8",//RF-D
        "http://10.130.96.65:6713/mag/hls/4c00e3f243a5464798a54d6fdd57cc82/1/live.m3u8",//IPdome
        "http://10.130.96.65:6713/mag/hls/e7f6b53231484bca9ff3fd7a7dc820a5/1/live.m3u8",//RF-IN
        "http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8",//香港卫视
        "http://111.13.42.8/PLTV/88888888/224/3221225851/index.m3u8"//cctv

    ];
    $(function () {
        loadSwf(videoUrls[0]);
        $(".picBox > div").each(function (index,elem) {
            $(elem).text($(".buttons>button").eq(index).text())
        })
        $(".picBox").on("dblclick","div",function () {

            var index = $(this).index();
            loadSwf(videoUrls[index]);
            $(this).parent().hide().siblings(".videoBox").show();
        });
        $(".close").click(function () {
            $(".videoBox").hide().siblings(".picBox").show();
        })
/*
        $(".buttons>button").click(function () {
            $(this).css("background", "green").siblings().css("background", "buttonface")
            loadSwf(videoUrls[$(this).index()]);
        });
        $("#mask").click(function () {
            $(".mask").toggle();
            $(".videoBox").toggle();
        })
*/
    });

</script>
<param name="flashvars"
       value="src=http%3A//10.130.96.65%3A6713/mag/hls/3e158a568dd84c2890d095a25517f78b/1/live.m3u8&amp;plugin_m3u8=../static/test/HLSProviderOSMF.swf&amp;autoPlay=true&amp;autoSwitchQuality=true">
<param name="flashvars"
       value="src=http%3A//10.130.96.65%3A6713/mag/hls/3e158a568dd84c2890d095a25517f78b/1/live.m3u8&amp;plugin_m3u8=../static/test/HLSProviderOSMF.swf&amp;autoPlay=true&amp;autoSwitchQuality=true">
<param name="flashvars"
       value="src=undefined&amp;plugin_m3u8=../static/test/HLSProviderOSMF.swf&amp;autoPlay=true&amp;autoSwitchQuality=true">
</body>
</html>